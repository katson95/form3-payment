version: "3"

services:
  f3-payment-db:
    build:
      context: ../f3-payment-db
      dockerfile: Dockerfile
    ports:
      - "27017:27017"
    restart: always
    
  f3-payment-app:
    build:  
      context: ../f3-payment-app
      dockerfile: Dockerfile
    restart: always
    depends_on:
      - f3-payment-db
    ports:
      - 8080:8080
    working_dir: /opt/app
    environment:
      - MONGODB_HOST=f3-payment-db
      - MONGODB_PORT=27017
      - MONGODB_DATABASE=f3-payment